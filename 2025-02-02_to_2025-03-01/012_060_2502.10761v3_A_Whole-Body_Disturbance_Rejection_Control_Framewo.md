# A Whole-Body Disturbance Rejection Control Framework for Dynamic Motions in Legged Robots

**相关性评分**: 6.0/10

**排名**: #12


---


## 基本信息

- **arXiv ID**: [2502.10761v3](https://arxiv.org/abs/2502.10761v3)
- **发布时间**: 2025-02-15T10:57:27Z
- **相关性评分**: 6.0/10
- **是否相关**: 是

## 作者

Bolin Li, Wentao Zhang, Xuecong Huang, Lijun Zhu, Han Ding

## 关键词

Robot control, quadruped robot locomotion

## 一句话总结

该论文提出了一种用于腿式机器人的全身抗干扰控制框架，通过扰动估计器和仿真实验验证其在动态运动中的鲁棒性。

## 摘要

This letter presents a control framework for legged robots that enables self-perception and resistance to external disturbances and model uncertainties. First, a novel disturbance estimator is proposed, integrating adaptive control and extended state observers (ESO) to estimate external disturbances and model uncertainties. This estimator is embedded within the whole-body control framework to compensate for disturbances in the legged system. Second, a comprehensive whole-body disturbance rejection control framework (WB-DRC) is introduced, accounting for the robot's full-body dynamics. Compared to previous whole-body control frameworks, WB-DRC effectively handles external disturbances and model uncertainties, with the potential to adapt to complex terrain. Third, simulations of both biped and quadruped robots are conducted in the Gazebo simulator to demonstrate the effectiveness and versatility of WB-DRC. Finally, extensive experimental trials on the quadruped robot validate the robustness and stability of the robot system using WB-DRC under various disturbance conditions.

## 详细分析

## 论文摘要：面向足式机器人动态运动的全身抗干扰控制框架

### 1. 研究背景和动机
足式机器人因其在复杂地形中的卓越移动能力，在搜救、勘探等领域具有广阔前景。然而，**外部干扰**（如地面不平、意外外力）和**模型不确定性**（如质量/惯量不准确、电机输出扭矩误差）严重威胁其运动的稳定性和鲁棒性。现有方法（如广义动量观测器、基于简化模型的控制器）在同时处理外部干扰、模型不确定性和容错性方面存在局限，且多针对四足机器人，对双足/人形机器人的适用性不足。

### 2. 核心方法和技术创新
本文提出了一个**全身抗干扰控制框架**，其核心创新在于：
- **新型干扰估计器**：创造性地将**自适应控制**与**扩张状态观测器**相结合。自适应控制在线估计与关节跟踪误差相关的参数化不确定性（`d1 = Eqθ`），ESO则估计剩余的非参数化总扰动（`d2`）。这种分离估计方式提升了物理可解释性和估计性能。
- **分层控制架构集成**：将上述估计器嵌入到一个完整的**分层控制架构**中。高层基于质心动量的模型预测控制生成参考轨迹；低层则是一个**全身抗干扰规划器**，它利用QP-WBC框架，将估计出的扰动作为动态约束进行前馈补偿，并重新优化地面反作用力，从而实现对扰动的主动抑制。

### 3. 主要实验结果
研究通过仿真和实物实验验证了WB-DRC的有效性与通用性：
- **仿真（Gazebo）**：在双足和四足（Unitree A1）机器人上测试。结果表明，相较于标准WBC，WB-DRC在**关节扭矩输出降低（模拟故障）**、**背负重物**和**承受持续外力**等情况下，能更好地维持机身高度跟踪和运动稳定性。
- **实物实验（Unitree A1）**：WB-DRC成功使机器人在**单腿关节扭矩大幅降低**、**背负5公斤重物**以及**在崎岖地形负重行进**等严苛条件下保持稳定运动，而标准WBC则在重载下失败。实验证明了该框架卓越的**鲁棒性、容错性**及对复杂地形的适应潜力。

### 4. 研究意义和价值
本工作为解决足式机器人动态运动中的干扰抑制问题提供了一个**通用、强鲁棒性的解决方案**。其价值体现在：
- **方法论创新**：提出的自适应ESO估计器为同时处理参数化与非参数化不确定性提供了新思路。
- **框架通用性**：WB-DRC框架基于全身动力学，不仅适用于四足机器人，也成功扩展至双足机器人，突破了以往方法的局限。
- **实用价值**：显著提升了机器人在存在模型误差、外部扰动和部分执行器故障情况下的性能，推动了足式机器人走向更复杂、动态的真实世界应用。

## 问答对

### 问题 1

**Q**: 这篇论文的核心创新点是什么，他想解决什么问题，怎么解决的？

**A**: ## 论文核心分析

### **论文拟解决的核心问题**
该论文旨在解决**足式机器人在动态运动中对未知外部扰动和模型不确定性缺乏鲁棒性**的关键挑战。具体问题包括：
1.  **外部扰动**：如地面不规则、意外外力、负载变化等。
2.  **模型不确定性**：如质量/惯量参数不准确、电机输出扭矩误差、复杂地形交互等。
3.  **现有方法的局限**：传统基于广义动量观测器的方法依赖特定动力学假设，且难以同时处理参数化不确定性和非参数化扰动；而基于简化模型（如单刚体模型）的控制方法不适用于全身动力学复杂的人形或双足机器人。

### **核心技术创新点**
论文提出了一个名为 **“全身抗扰动控制框架”** 的创新解决方案，其核心由三大技术创新构成：

1.  **新型扰动估计器**：
    - **技术融合**：创造性地将**自适应控制**与**扩张状态观测器**相结合。
    - **扰动建模**：将系统总扰动 `d` 分解为两部分进行分别估计：
        - **`d₁` (参数化不确定性)**：建模为关节跟踪误差 `(e, ė)` 的线性函数 `E_qθ`，其中未知参数 `θ` 通过**自适应律**在线估计。这相当于在线调整关节的“PD刚度”，具有明确的物理意义。
        - **`d₂` (非参数化扰动/未建模动态)**：视为一个扩张状态 `x₃`，由**ESO**进行估计。
    - **理论保证**：论文通过李雅普诺夫函数严格证明了该估计器在有/无扰动情况下的稳定性和误差有界性。

2.  **全身抗扰动控制框架**：
    - **分层集成**：将上述估计器无缝嵌入到一个分层的、基于优化的全身控制架构中。
    - **扰动补偿机制**：估计出的总扰动 `f̂` 被前馈补偿到全身动力学方程中。具体通过一个**二次规划-全身控制器**来实现：
        - **QP层**：根据估计的扰动和参考值，重新优化地面反力，使其在满足摩擦锥约束的同时，尽可能接近理想参考值。
        - **WBC层**：以严格的优先级（动力学约束最高，跟踪任务次之）求解包含扰动补偿项的优化问题，得到最终的关节加速度、地面反力和关节扭矩指令。

3.  **通用性与验证**：
    - **框架通用**：该框架基于完整的浮基机器人动力学，因此可同时适用于**四足机器人**和**双足/人形机器人**，突破了以往许多方法仅适用于四足机器人的限制。
    - **全面验证**：通过Gazebo仿真（双足、四足）和Unitree A1实物实验，系统验证了框架在**电机扭矩衰减、大负载、外部推力、复杂地形**等多种扰动下的有效性。

### **解决方案路径总结**
论文的解决路径清晰且系统：

```mermaid
graph TD
    A[问题： 扰动与模型不确定性] --> B(高层： 基于质心动量的MPC)；
    B --> C[生成理想参考轨迹<br>（q_ref, τ_ref, F_ref）]；
    C --> D{低层： 全身抗扰动控制WB-DRC}；
    
    subgraph D[核心创新模块]
        D1[自适应ESO扰动估计器] --> D2[QP优化地面反力]；
        D2 --> D3[扰动补偿的全身控制器WBC]；
    end

    D3 --> E[最终关节扭矩]；
    E --> F[机器人执行]；
    F -- 状态反馈 --> D1；
    F -- 状态反馈 --> D3；
    
    style D fill:#e1f5fe,stroke:#01579b,stroke-width:2px；
```

**实际价值**：
1.  **显著提升鲁棒性**：使机器人能够承受高达自身重量60%的负载、电机扭矩大幅衰减以及持续的外部推力，在仿真和实物实验中均表现出远超标准WBC的稳定性。
2.  **增强故障容错能力**：对关节电机输出异常（如故障或性能下降）具有内在的补偿能力。
3.  **拓展应用场景**：为足式机器人在搜救、负重运输、复杂非结构化地形作业等要求高可靠性的实际应用提供了更强大的控制基础。
4.  **提供通用框架**：为足式机器人社区提供了一个可扩展的、理论坚实的抗扰动控制框架蓝本。


### 问题 2

**Q**: 请用一段话总结这篇论文，明确说明：论文试图解决的核心问题；提出的主要方法或框架；最终取得的主要效果或结论。要求语言简洁、信息密度高，不要复述摘要原文。

**A**: 这篇论文旨在解决足式机器人在动态运动中，面对外部扰动（如外力冲击、地形变化）和模型不确定性（如质量、惯量不准确，关节扭矩输出误差）时，如何维持稳定性和鲁棒性的核心挑战。为此，论文提出了一个**全身抗扰控制框架**，其核心创新在于设计了一个**结合自适应控制与扩张状态观测器的新型扰动估计器**，能够同时估计参数化模型误差和非线性外部扰动，并将此估计值嵌入到一个分层的全身控制架构中进行前馈补偿。通过**在双足和四足机器人上的仿真与Unitree A1机器人的实物实验**验证，该框架显著提升了机器人在承受大负载、关节扭矩故障、外力冲击以及复杂地形下的运动稳定性和抗干扰能力，证明了其优于传统全身控制方法的鲁棒性与通用性。


### 问题 3

**Q**: 这篇论文相对于已有工作有哪些明确的创新点？请逐条列出，并对每一条说明：相比以往方法改进或不同之处在哪里，以及该创新解决了什么具体问题或带来了什么优势。

**A**: ## 论文创新点分析

这篇论文《A Whole-Body Disturbance Rejection Control Framework for Dynamic Motions in Legged Robots》针对腿式机器人在动态运动中抵抗外部扰动和模型不确定性的问题，提出了一个名为**全身抗扰控制框架**的创新解决方案。其核心创新点可归纳为以下三个方面：

---

### 1. **新型扰动估计器：自适应控制与扩展状态观测器的融合**

-   **改进/不同之处**：
    -   **以往方法**：传统的扰动观测器（如广义动量观测器）通常将系统总扰动作为一个整体进行估计，或者仅处理参数化不确定性（自适应控制）或非参数化不确定性（ESO）。这些方法在**物理可解释性**和**对特定类型不确定性的处理效率**上存在局限。
    -   **本文方法**：提出了一种**混合估计器**，将**自适应控制**与**扩展状态观测器**在一个统一的框架内结合。它将系统不确定性分解为两部分进行估计：
        1.  **参数化不确定性**：通过自适应律在线估计一个与关节位置/速度误差相关的PD项的参数 `θ`。
        2.  **非参数化不确定性及未建模动态**：通过ESO将其视为一个扩展状态 `x₃` 进行估计。
    -   具体形式为：`d̄ = Sᵀ * Eq * θ + d₂(t)`，其中 `Eq` 由跟踪误差构成。

-   **解决的问题/带来的优势**：
    -   **解决的具体问题**：解决了单一方法（纯自适应或纯ESO）在应对**混合型不确定性**（既有参数误差，又有未建模动态和外部力）时性能不足的问题。特别是提升了在**关节电机输出扭矩不精确**（一种参数化误差）和**脚底接触力估计不准确**（一种非参数化扰动）同时存在时的处理能力。
    -   **核心优势**：
        1.  **物理可解释性增强**：将部分不确定性建模为PD控制项，其估计参数 `θ` 可以理解为“自适应刚度/阻尼”，更易于理解和调试。
        2.  **估计性能提升**：通过分工协作，自适应部分专注于可参数化的模型误差，ESO专注于剩余的“总扰动”，降低了ESO的学习负担，理论上能获得比单一ESO更好的跟踪性能。
        3.  **稳定性保证**：论文通过李雅普诺夫分析严格证明了估计误差在有无扰动情况下的有界性。

### 2. **通用的全身抗扰控制框架的提出与集成**

-   **改进/不同之处**：
    -   **以往方法**：许多先进的抗扰控制方法（如文中引用的[4],[5],[10]）基于**简化模型**（如单刚体模型），主要应用于四足机器人，难以直接推广到动力学更复杂的双足/人形机器人。另一些基于全身动力学的方法[6]可能未充分考虑高层规划与模型不确定性的耦合。
    -   **本文方法**：提出了一个**通用的、分层的WB-DRC框架**，并将其无缝集成到腿式机器人的标准分层控制架构中。该框架包含：
        1.  **高层**：基于质心动量（Centroidal Dynamics）的模型预测控制，使用**标称模型**生成参考轨迹。
        2.  **低层**：集成了上述新型扰动估计器的全身控制器，负责补偿扰动并跟踪参考轨迹。

-   **解决的问题/带来的优势**：
    -   **解决的具体问题**：克服了以往方法**通用性不足**的问题。以往基于简化模型的方法不适用于多链节、动力学耦合更强的双足机器人；而一些全身控制方法未能将抗扰模块与高层运动规划有机融合。
    -   **核心优势**：
        1.  **平台通用性**：框架设计基于完整的浮基机器人动力学方程，因此可同时适用于**四足和双足/人形机器人**（论文通过仿真验证了二者）。
        2.  **架构清晰**：明确了“高层规划不考虑扰动，低层控制全力抗扰”的分工，使系统模块化，抗扰模块（WB-DRC）可以作为插件替换标准WBC模块。
        3.  **应对复杂地形潜力**：通过准确估计和补偿包含地面反作用力误差在内的扰动，为在不平整地形上的鲁棒运动奠定了基础。

### 3. **基于扰动估计的全身控制器的设计：WBC与QP的协同**

-   **改进/不同之处**：
    -   **以往方法**：在标准全身控制中，地面反作用力通常直接使用MPC计算的参考值，或者通过优化获得但未充分考虑估计出的扰动对系统整体力平衡的影响。
    -   **本文方法**：在WBC层引入了一个**二次规划**步骤来重新优化地面反作用力。
        1.  首先，利用估计出的总扰动 `f̂` 和参考值，计算出一个理想的系统总 wrench `W_d*`。
        2.  然后，构建一个QP问题，求解一组新的地面反作用力 `F_r*`，使得在无扰动假设下的系统 wrench 尽可能接近 `W_d*`，同时 `F_r*` 本身尽量接近MPC的参考值 `F_ref`。
        3.  最后，将调整后的 `F_r*` 和经过修正的扰动估计 `f̂_filter^w` 一同送入带优先级任务的WBC中，求解最终关节加速度、力和力矩。

-   **解决的问题/带来的优势**：
    -   **解决的具体问题**：解决了**参考地面反作用力在存在扰动时不再最优**的问题。当机器人受到扰动或存在模型误差时，MPC基于标称模型计算出的 `F_ref` 可能无法产生所需的整体运动效果。
    -   **核心优势**：
        1.  **力分配优化**：通过QP动态调整各脚的地面反作用力，使其在满足摩擦锥等物理约束的前提下，更好地抵消扰动的影响，实现更精确的全身运动跟踪。
        2.  **控制一致性**：确保了底层WBC执行的力指令与上层扰动估计器的补偿意图相一致，形成了闭环的抗扰策略，而不是开环的力跟踪。

---

### **总结：技术创新与实际价值**

| 创新点 | 技术改进核心 | 解决的工程问题 | 带来的实际优势 |
| :--- | :--- | :--- | :--- |
| **混合扰动估计器** | 自适应控制 + ESO，分离估计参数化与非参数化扰动。 | 电机扭矩不准、负载变化、接触力估计误差等混合不确定性。 | 更强的鲁棒性、更好的跟踪性能、故障容错能力（如电机扭矩下降）。 |
| **通用WB-DRC框架** | 将抗扰模块集成到分层控制架构，适用于完整全身动力学。 | 方法局限于特定机器人（如四足）或简化模型。 | 框架可扩展至双足/人形机器人，为复杂动态运动提供统一解决方案。 |
| **扰动感知的WBC** | 在WBC前引入QP，根据扰动估计重新优化地面反作用力。 | 参考接触力在扰动下非最优，导致跟踪性能下降。 | 更优的力分配，提升在负载、外力冲击等条件下的平衡与运动稳定性。 |

**实际价值**：通过仿真（双足/四足）和实物实验（Unitree A1四足机器人）验证，该框架使机器人在**承载重负载**（高达体重60%）、**关节电机故意输出不足**、**受到持续或瞬时外力推搡**以及**在粗糙地形**上运动时，均表现出远超基准方法（标准WBC）的**稳定性、鲁棒性和轨迹跟踪精度**。这直接提升了腿式机器人在搬运、救援、野外探索等实际任务中的可靠性和实用性。


### 问题 4

**Q**: 论文在实验或评估中最终实现了怎样的效果？请说明使用了哪些数据集和评价指标，与哪些基线方法进行了对比，以及在关键指标上的主要性能提升或结论。如果论文未给出明确的定量结果，也请说明原因。

**A**: ## 论文实验与评估效果分析

该论文通过**仿真**和**实物实验**，全面评估了所提出的全身抗扰控制框架（WB-DRC）的有效性、鲁棒性和通用性。

### 一、 评估方法与实验设置

1.  **评估平台**:
    *   **仿真环境**: Gazebo 模拟器，运行于单台PC。
    *   **实物平台**: Unitree A1 四足机器人。
    *   **控制架构**: 基于ROS Noetic实现分层控制（高频MPC + 高频WB-DRC）。

2.  **对比基线方法**:
    *   论文始终以**标准全身控制（Standard WBC）** 作为主要对比基线。该基线方法基于文献 [18] 的框架，是领域内广泛采用的先进方法，但不包含论文提出的自适应ESO扰动估计与补偿模块。

3.  **评价指标**:
    *   **核心定量指标**: **机身高度（Base Link Height）** 相对于期望高度的跟踪性能。这是衡量机器人抗扰能力和稳定性的直接指标。
    *   **定性/场景化指标**:
        *   **抗外部扰动能力**: 施加不同大小和方向的持续外力后，机器人能否保持稳定。
        *   **抗模型不确定性能力**: 在关节扭矩输出人为降低（模拟电机故障）、负载变化（携带重物）等情况下，机器人能否完成步态。
        *   **通用性与故障容忍度**: 框架在双足机器人和四足机器人上的表现，以及对突发性大扭矩失效的响应。
        *   **最终任务完成度**: 机器人是否跌倒（失败）或能持续运动（成功）。

### 二、 主要实验结果与性能提升

#### 1. 双足机器人仿真实验
*   **场景**: 原地踏步和行走，同时背负重物（8kg, 6kg）。
*   **结果**:
    *   **WB-DRC**: 机身高度能紧密跟踪期望值，机器人保持稳定。
    *   **标准WBC**: 在负重情况下，机身高度严重偏离并最终跌倒（约14秒和16秒）。
*   **结论**: WB-DRC对**质量/惯性参数不确定性**（由重物引起）的鲁棒性显著优于标准WBC。

#### 2. 四足机器人仿真实验
*   **场景1: 外部力扰动**
    *   对机身施加沿Z轴方向-80N至+80N的持续力。
    *   **结果**: WB-DRC在所有力扰动下，机身高度维持得比标准WBC更接近期望值，抗扰能力更强。
*   **场景2: 负重行走**
    *   机器人携带8kg重物（占体重~60%），以不同速度（-0.1 至 0.6 m/s）行走。
    *   **结果**: WB-DRC能更好地维持机身高度，表明其能有效处理由负载引起的**模型不确定性**。

#### 3. 四足机器人实物实验
*   **场景1: 模拟关节电机故障**
    *   人为降低右后腿膝关节（甚至包括髋关节）的扭矩输出（降低50%-90%）。
    *   **结果**:
        *   **WB-DRC**: 从站立到原地踏步，机身高度轨迹平稳，对短时大扭矩失效不敏感。
        *   **标准WBC**: 高度波动剧烈，性能下降明显。
    *   **结论**: WB-DRC具有优异的**故障容忍能力**。
*   **场景2: 负重行走**
    *   机器人携带5kg重物行走。
    *   **结果**:
        *   **WB-DRC**: 能成功完成20秒的行走任务。
        *   **标准WBC**: 在约6秒时跌倒。连续三次测试均失败。
    *   **结论**: 在实物系统上，WB-DRC处理**模型不确定性**的鲁棒性得到验证，而标准WBC在此场景下失效。
*   **场景3: 复杂地形**
    *   机器人携带5kg负载在崎岖地形上行走。
    *   **结果**: 机器人成功穿越，证明了WB-DRC框架在**实际复杂环境**中的有效性。

### 三、 总结与局限性

*   **主要性能提升**: 与先进的基线方法（标准WBC）相比，WB-DRC在**抗外部力扰动**、**抗模型/参数不确定性**（尤其是负载变化和扭矩输出不准）以及**系统故障容忍度**方面表现出**显著且一致的优越性**。其核心价值在于将**自适应控制**与**ESO**结合，能同时估计参数化不确定性（`θ`）和非线性总扰动（`d₂`），并通过全身控制框架进行前馈补偿。
*   **评价特点**:
    *   论文未使用标准机器学习/视觉领域的“数据集”和“准确率”等指标，而是采用**机器人控制领域典型的场景化、任务导向的评估方法**。
    *   定量结果主要体现在**机身高度跟踪曲线**的对比上，通过直观的曲线偏离程度和机器人是否跌倒来评判性能。
    *   缺乏一些更精细的定量指标，例如：跟踪误差的均方根（RMSE）、稳定裕度的定量计算、能量消耗对比等。这在一定程度上限制了不同方法之间性能差距的精确量化。
*   **结论**: 实验全面证实了WB-DRC框架的有效性。它不仅适用于四足机器人，也成功应用于双足机器人，展示了其作为**通用全身抗扰控制解决方案**的潜力，能够显著提升腿式机器人在动态运动和存在扰动环境中的鲁棒性与稳定性。


## 相关链接

- [arXiv 页面](https://arxiv.org/abs/2502.10761v3)
- [HTML 版本](https://arxiv.org/html/2502.10761v3)
