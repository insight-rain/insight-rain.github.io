# QuietPaw: Learning Quadrupedal Locomotion with Versatile Noise Preference Alignment

**相关性评分**: 6.0/10

**排名**: #31


---


## 基本信息

- **arXiv ID**: [2503.05035v1](https://arxiv.org/abs/2503.05035v1)
- **发布时间**: 2025-03-06T23:20:04Z
- **相关性评分**: 6.0/10
- **是否相关**: 是

## 作者

Yuyou Zhang, Yihang Yao, Shiqi Liu, Yaru Niu, Changyi Lin, Yuxiang Yang, Wenhao Yu, Tingnan Zhang, Jie Tan, Ding Zhao

## 关键词

Robot control, quadruped robot locomotion, mujoco

## 一句话总结

QuietPaw框架通过条件噪声约束策略（CNCP）学习四足机器人运动，在平衡运动性能与噪声约束方面实现可调节的噪声降低。

## 摘要

When operating at their full capacity, quadrupedal robots can produce loud footstep noise, which can be disruptive in human-centered environments like homes, offices, and hospitals. As a result, balancing locomotion performance with noise constraints is crucial for the successful real-world deployment of quadrupedal robots. However, achieving adaptive noise control is challenging due to (a) the trade-off between agility and noise minimization, (b) the need for generalization across diverse deployment conditions, and (c) the difficulty of effectively adjusting policies based on noise requirements. We propose QuietPaw, a framework incorporating our Conditional Noise-Constrained Policy (CNCP), a constrained learning-based algorithm that enables flexible, noise-aware locomotion by conditioning policy behavior on noise-reduction levels. We leverage value representation decomposition in the critics, disentangling state representations from condition-dependent representations and this allows a single versatile policy to generalize across noise levels without retraining while improving the Pareto trade-off between agility and noise reduction. We validate our approach in simulation and the real world, demonstrating that CNCP can effectively balance locomotion performance and noise constraints, achieving continuously adjustable noise reduction.

## 详细分析

## 论文《QuietPaw：通过多功能噪声偏好对齐学习四足机器人运动》详细摘要

### 1. 研究背景和动机
四足机器人在全速运行时会产生响亮的脚步声，这在家庭、办公室和医院等以人为中心的环境中会造成干扰。因此，**平衡运动性能与噪声约束**对于四足机器人在现实世界中的成功部署至关重要。然而，实现自适应噪声控制面临三大挑战：**敏捷性与噪声最小化之间的权衡**、**跨不同部署条件的泛化需求**，以及**基于噪声要求有效调整策略的困难**。现有研究大多专注于优化敏捷性、稳定性或能效，而**缺乏对噪声约束的显式考量**。

### 2. 核心方法和技术创新
本文提出了 **QuietPaw 框架**，其核心是**条件噪声约束策略**。主要技术创新包括：
- **条件化约束强化学习框架**：将噪声约束水平 `ϵ` 作为策略的**条件变量**，使单个策略能够根据不同的噪声容忍度动态调整行为，而无需重新训练。
- **基于后继特征的分解价值表示**：在评论家网络中，将状态表示 `ξ(s)` 与约束依赖的权重函数 `w(ϵ)` 解耦。这种分解使策略能够更好地泛化到未见过的噪声水平，并**改善帕累托前沿**。
- **物理启发的噪声成本函数**：在仿真中，通过接触力和冲击速度的指数惩罚函数来近似模拟噪声，为训练提供可计算的监督信号。

### 3. 主要实验结果
- **仿真验证**：在平坦和粗糙地形上，CNCP 在**条件化策略中实现了最低的平均成本违反和跟踪误差**，优于简单的条件连接基线。
- **帕累托最优性**：CNCP 学习到了更优的帕累托前沿，在噪声成本与跟踪误差的权衡上显著优于基线方法，具有更高的**超体积**和更均匀的**稀疏度**。
- **实物验证**：在 Unitree Go2 机器人上，CNCP 成功实现了**连续可调的噪声降低**。通过改变条件变量 `ϵ`，可以在橡胶和木地板等不同地面上，实时、平滑地调整脚步声的响度，同时保持可接受的运动跟踪性能。

### 4. 研究意义和价值
本研究的意义在于：
- **实际应用价值**：为四足机器人在**对噪声敏感的社会化环境**（如医院、家庭）中的部署提供了关键技术，提升了机器人的“用户友好性”。
- **算法贡献**：提出了一种**通用、高效的条件化安全强化学习范式**，不仅适用于噪声控制，其“表示分解”思想也可推广至其他需要动态适应多种约束的机器人任务。
- **推动领域发展**：将**声学约束**正式引入四足机器人运动学习的研究范畴，强调了在追求高性能之外，机器人行为的社会可接受性同样重要，为未来更智能、更体贴的机器人系统奠定了基础。

## 问答对

### 问题 1

**Q**: 这篇论文的核心创新点是什么，他想解决什么问题，怎么解决的？

**A**: ## 论文核心分析：QuietPaw

### **一、 拟解决的核心问题**
论文旨在解决四足机器人在**现实人机共存环境**（如家庭、办公室、医院）中部署时的一个关键但常被忽视的问题：**由足部触地产生的过大噪音**。具体挑战在于：
1.  **性能与噪音的权衡**：降低冲击力以减少噪音，往往会导致机器人运动变得迟缓、不敏捷，影响其核心运动性能（如速度、稳定性）。
2.  **泛化需求**：不同的地面材质（如地毯 vs. 硬地板）和用户对噪音的容忍度各不相同，需要一个策略能灵活适应多种噪音约束条件，而非针对单一场景训练。
3.  **策略的有效调节**：简单地给策略输入一个噪音约束值，往往无法引导策略产生有意义的行为变化，难以实现精确的、可调节的噪音控制。

### **二、 核心创新点**
论文提出了 **QuietPaw** 框架及其核心算法 **条件噪音约束策略（Conditional Noise-Constrained Policy, CNCP）**。其创新性主要体现在以下三个层面：

1.  **可调节的噪音约束策略框架**：
    - **创新**：将噪音约束水平 `ϵ` 作为一个**条件变量**输入给策略，使**单个策略**能够根据不同的 `ϵ` 值动态调整其运动行为，实现从“高噪音-高性能”到“低噪音-低性能”的连续调节。
    - **价值**：无需为每个噪音阈值重新训练策略，极大地提高了数据效率和部署灵活性，满足了现实场景中动态调整的需求。

2.  **基于后继特征分解的价值表示学习**：
    - **创新**：在评论家网络中使用**后继特征分解**。将价值函数分解为**状态依赖的特征表示** `ξ(s)` 和**约束依赖的权重函数** `w(ϵ)` 的乘积（`V(s,ϵ) = ξ(s)^T * w(ϵ)`）。
    - **价值**：
        - **解耦表示**：使策略能够学习与噪音约束无关的通用状态动力学，同时通过调整权重来适应具体约束，提升了跨不同噪音水平的泛化能力。
        - **改善帕累托前沿**：该方法能学习到更优的“性能-噪音”权衡曲线（帕累托前沿），即在相同噪音水平下获得更好的运动性能，或在相同性能下产生更低的噪音。

3.  **针对四足机器人噪音的物理信息成本函数**：
    - **创新**：在仿真中设计了一个基于物理的噪音成本函数，近似模拟真实世界的足部撞击噪音。该函数结合了**足端冲击力**和**冲击速度**的指数惩罚项。
        ```math
        c(s,a) = λ₁∑ exp((F_max - ||F_i||)/σ_F) + λ₂∑ exp(-v_impact,i² / σ_v)
        ```
    - **价值**：在没有直接声音模拟的仿真环境中，提供了一个可计算、可优化的噪音代理目标，成功地将仿真训练迁移到真实机器人上。

### **三、 解决方案概述**
1.  **问题建模**：将噪音约束下的运动学习建模为一个**约束马尔可夫决策过程（CMDP）**，目标是在满足累积噪音成本 `J_c^π ≤ ϵ` 的前提下，最大化运动任务奖励 `J_r^π`。
2.  **策略训练**：
    - 使用 **PPO-Lagrangian** 作为基础约束强化学习算法，为每个训练的约束水平 `ϵ_i` 维护一个独立的拉格朗日乘子进行约束优化。
    - 在训练时，同时采样一系列不同的约束值 `ϵ ∈ ℰ`，让策略学习整个约束空间的行为。
    - 采用两阶段课程学习：先学习基础运动，再逐步引入噪音成本进行优化。
3.  **网络结构**：
    - **策略网络**：以状态 `s` 和约束条件 `ϵ` 为输入，输出动作。
    - **评论家网络**：采用分解结构，共享的状态编码器输出特征 `ξ(s)`，独立的条件网络输出权重 `w(ϵ)`，通过点积得到条件价值估计。

### **四、 验证与实际价值**
- **仿真实验**：在平坦和粗糙地形上，CNCP 在**平均跟踪误差**和**成本违反程度**上均优于其他条件策略基线，且其解集更接近帕累托最优前沿（具有更高的超体积和更均匀的稀疏度）。
- **实物实验**：在 Unitree Go2 机器人上验证。通过实时改变输入的条件变量 `ϵ`，机器人能够在**橡胶**和**木质**地板等不同材质上，实现**连续、可调的噪音降低**，同时保持可接受的运动跟踪性能。
- **实际价值**：该工作使四足机器人具备了“**静音模式**”切换能力，是迈向**社交感知机器人**的重要一步。它使得机器人能在需要安静的场合（如夜间、医院）降低干扰，而在开放空间则发挥全力，极大地提升了其在人类环境中的实用性和可接受度。

**总结**：QuietPaw 的核心创新在于将一个具有挑战性的多目标权衡问题（性能 vs. 噪音），通过**条件策略**和**分解表示学习**，转化为一个**单一、可泛化、可实时调节**的智能控制策略，为四足机器人的现实部署提供了关键的“静音”解决方案。


### 问题 2

**Q**: 请用一段话总结这篇论文，明确说明：论文试图解决的核心问题；提出的主要方法或框架；最终取得的主要效果或结论。要求语言简洁、信息密度高，不要复述摘要原文。

**A**: 这篇论文旨在解决四足机器人在实际部署中，其高速运动产生的足部噪音会干扰人类环境（如医院、办公室）的问题。核心挑战在于如何让机器人在保持敏捷运动性能的同时，灵活适应不同场景下的降噪需求，而无需为每个噪音阈值重新训练策略。为此，论文提出了 **QuietPaw** 框架及其核心 **条件化噪音约束策略（CNCP）**。该方法将噪音水平作为条件变量输入策略，并利用**后继特征分解**技术，在评论家网络中分离出状态相关和约束相关的表示，从而使单一策略能够泛化到不同的噪音约束。实验表明，该方法能在仿真和真实世界中实现**连续可调的降噪**，在运动性能与噪音抑制之间取得了更优的帕累托权衡，显著提升了策略的适应性和实用性。


### 问题 3

**Q**: 这篇论文相对于已有工作有哪些明确的创新点？请逐条列出，并对每一条说明：相比以往方法改进或不同之处在哪里，以及该创新解决了什么具体问题或带来了什么优势。

**A**: ## QuietPaw 论文创新点分析

这篇论文针对四足机器人运动噪声控制问题，提出了一个名为 **QuietPaw** 的框架，其核心是 **条件噪声约束策略**。相对于已有工作，其明确的创新点如下：

---

### 1. **提出了可动态调节噪声约束的条件策略框架**
- **相比以往方法的改进/不同之处**：
    - **以往方法**：大多数约束强化学习或安全强化学习方法（如 PPO-Lagrangian）针对的是**单一、固定**的安全或成本约束阈值进行训练。一旦部署，策略行为无法根据环境需求动态调整。若要适应新约束，需要重新训练整个策略，数据效率低下且不实用。
    - **本文方法**：提出了 **条件噪声约束策略**，将噪声约束阈值 `ϵ` 作为策略 `π(·|s, ϵ)` 的**条件输入**。在训练时，策略学习适应一个**约束阈值分布** `ℰ`。在部署时，无需重新训练，只需通过调节输入的条件变量 `ϵ`，即可实时、连续地调整策略的噪声抑制程度。
- **解决的具体问题/带来的优势**：
    - **解决了适应性差的问题**：使机器人能够灵活应对不同用户偏好（如医院需要极静音，仓库可容忍稍大噪声）、不同地面材质（地毯 vs. 硬地板）带来的不同噪声容忍需求。
    - **提升了部署实用性**：实现了“一次训练，多级部署”，大大降低了为不同场景定制策略的计算成本和数据需求。

### 2. **设计了基于后继特征分解的价值表示学习方法**
- **相比以往方法的改进/不同之处**：
    - **以往方法**：在条件RL中，通常简单地将条件变量（如 `ϵ`）与状态观测拼接后输入策略和价值网络。这种方法（论文中的CONC、R&C基线）往往导致策略难以学习条件变量与行为之间复杂的映射关系，泛化能力差，无法有效引导策略在不同约束下产生显著不同的行为。
    - **本文方法**：在评论家网络中引入了**后继特征分解**。将条件价值函数 `V(s, ϵ)` 分解为**状态依赖的特征向量** `ξ(s)` 和**约束依赖的权重向量** `w(ϵ)` 的点积：`V(s, ϵ) = ξ(s)^T * w(ϵ)`。`ξ(s)` 学习与环境动态相关的通用状态表示，而 `w(ϵ)` 专门学习如何根据不同的噪声约束来调制这个表示。
- **解决的具体问题/带来的优势**：
    - **解决了策略引导失效问题**：通过解耦表示，策略能更清晰、更有效地理解不同噪声约束 `ϵ` 所要求的行为变化，从而实现对噪声水平的精确、有意义的控制。
    - **提升了帕累托最优性**：该方法使学习到的策略在“运动性能”与“噪声抑制”的权衡曲线上达到了更优的帕累托前沿。这意味着在相同的噪声约束下，能获得更好的运动性能（如速度跟踪精度），或在相同的性能要求下，能实现更低的噪声。

### 3. **将可调节噪声约束问题系统性地建模并应用于复杂四足机器人运动控制**
- **相比以往方法的改进/不同之处**：
    - **以往方法**：
        1.  相关研究较少。少数工作（如 Watanabe et al.）使用RL优化固定噪声目标，缺乏可调节性。
        2.  动态约束RL的研究多集中于简单的模拟环境（如网格世界、简单控制任务），在复杂、高维的**真实世界机器人运动控制**中应用和验证不足。
    - **本文方法**：
        1.  **系统建模**：将噪声控制明确建模为一个**约束马尔可夫决策过程**，并设计了基于接触力和冲击速度的**物理信息噪声成本函数**，以在仿真中有效近似真实噪声。
        2.  **复杂任务验证**：成功将所提出的CNCP框架应用于需要高度敏捷性和平衡性的**四足机器人全身运动控制**任务中，并在**仿真和真实机器人**上进行了全面验证。
- **解决的具体问题/带来的优势**：
    - **填补了研究空白**：将“用户友好”的噪声约束系统地引入以性能为导向的四足机器人运动学习领域。
    - **证明了方法的有效性与实用性**：通过Unitree Go2机器人的实物实验，证明了该方法能在不同速度、不同地面（橡胶、木板）上实现有效的、可调节的噪声抑制，同时保持可接受的运动性能，推动了**社会感知机器人**在实际场景中的部署。

---

### **总结**
本文的核心创新在于**“可调节性”**和**“高效性”**。它通过**条件策略框架**实现了噪声约束的实时、无缝调节，并通过**后继特征分解**这一表示学习技术，解决了条件策略难以训练和泛化的关键难题，最终在复杂的四足机器人运动控制任务上实现了性能与噪声抑制的**优越帕累托权衡**。这为解决机器人融入人类环境时产生的噪声干扰问题，提供了一个高效、灵活的解决方案。


### 问题 4

**Q**: 论文在实验或评估中最终实现了怎样的效果？请说明使用了哪些数据集和评价指标，与哪些基线方法进行了对比，以及在关键指标上的主要性能提升或结论。如果论文未给出明确的定量结果，也请说明原因。

**A**: ## 实验与评估效果分析

论文通过仿真和真实世界实验，全面验证了所提出的 **Conditional Noise-Constrained Policy (CNCP)** 框架的有效性。实验旨在证明CNCP能够在**无需重新训练**的情况下，通过调整噪声约束水平（ϵ），灵活地平衡运动性能与噪声抑制，并在帕累托最优性上超越基线方法。

### 一、 实验设置与评价指标

#### 1. 仿真环境与数据集
- **仿真平台**：使用 **Isaac Gym** 进行训练和评估。
- **训练设置**：在4000个并行环境中训练10k次迭代，使用两阶段课程学习策略。首先学习基础运动策略，然后逐步将重点转向噪声最小化。
- **评估条件**：在**平坦地形**和**粗糙地形**上测试。目标速度范围从0.5 m/s到2.25 m/s。
- **噪声约束水平 (ϵ)**：评估一组预定义的约束值：`{0, 0.1, 0.2, 0.3, 0.4, 0.6, 0.8, 1.0}`。这种不均匀的选择强调了对更严格噪声抑制阈值的分析。

#### 2. 真实世界部署
- **机器人平台**：使用 **Unitree Go2** 四足机器人。
- **测试环境**：在不同地面（**橡胶**和**木质**地板）上测试。
- **数据采集**：
    - **噪声测量**：使用固定在机器人背部的智能手机麦克风录制音频，采样率44.1 kHz。计算**声压级 (SPL，单位dB)**，并减去环境背景噪声以隔离运动噪声。
    - **运动追踪**：使用 **OptiTrack** 运动捕捉系统（Prime X22相机）测量机器人的实际速度，用于计算跟踪误差。

#### 3. 核心评价指标
1.  **平均归一化成本违反度 (Avg Normalized Cost Violation)**
    - **公式**: `𝔼[max(0, 实际成本ci - 约束阈值ϵi)]`
    - **意义**：衡量策略在多大程度上违反了给定的噪声约束。值越低，说明策略越能严格遵守噪声限制。
2.  **平均跟踪误差 (Avg Tracking Error)**
    - **单位**: m/s
    - **意义**：衡量策略执行指定目标速度的准确性。值越低，运动性能（敏捷性）越好。
3.  **帕累托最优性分析**
    - **帕累托前沿 (Pareto Front)**：在以“归一化成本”和“跟踪误差”构成的二维空间中，绘制不同策略在不同约束下的表现点。**位于左下角的点集**构成了帕累托前沿，代表在给定噪声水平下能达到的最佳性能权衡。
    - **超体积 (Hypervolume)**：计算帕累托前沿与一个参考点所围成的面积。**值越高**，代表该方法的帕累托前沿整体更优（在更低的成本和误差上都有更好的表现）。
    - **稀疏度 (Sparsity)**：计算帕累托前沿上解之间的标准距离差。**值越低**，代表帕累托解分布越均匀、覆盖性越好。
4.  **真实世界噪声水平 (dB SPL)**
    - **意义**：直接测量机器人运动产生的实际声压级分贝值，直观展示噪声抑制效果。

### 二、 对比的基线方法

论文将CNCP与两大类基线方法进行对比：

#### A. 条件策略 (Conditioned Policies)
*单一策略，在部署时通过输入不同的ϵ来调整行为。*
- **CONC**：简单拼接基线。直接将噪声约束ϵ与状态观测拼接后输入策略网络。
- **R&C**：特征扩展基线。将噪声约束ϵ重复10次后再与状态观测拼接，以增强其表征。

#### B. 先知策略 (Oracle Policies)
*为每个特定的噪声约束ϵ单独训练一个策略，代表了在该约束下能达到的性能上限。由于需要为每个ϵ训练一个独立策略，数据效率低，不实用，但作为性能对比的标杆。*
- **Oracle SafeRL**：基于PPO-Lagrangian方法，为8个不同的ϵ值分别训练8个独立的约束强化学习策略。
- **Oracle MORL**：基于多目标强化学习（MORL）方法，将噪声作为奖励信号的一部分（而非约束），通过调整奖励权重为8个不同的噪声偏好训练8个独立策略。

### 三、 关键性能结果与结论

#### 1. 成本违反与跟踪误差（仿真）
**核心结论：CNCP在条件策略中取得了最佳的权衡，在严格满足噪声约束的同时，保持了最优的运动跟踪性能。**

- **成本违反度**：如表I所示，在平坦和粗糙地形上，CNCP的成本违反度均**低于CONC和R&C**，表明其能更有效地将噪声控制在约束阈值内。虽然不及为每个约束单独训练的Oracle SafeRL，但后者需要8倍的训练数据。
- **跟踪误差**：CNCP的跟踪误差在**所有方法中最低**（包括Oracle策略），显著优于CONC、R&C和两个Oracle基线。这说明CNCP在抑制噪声时，对运动敏捷性的牺牲最小。

#### 2. 帕累托最优性（仿真）
**核心结论：CNCP学习到了更优的帕累托前沿，在噪声成本和运动误差的权衡上全面优于基线条件策略。**

- **帕累托前沿可视化**：如图3所示，CNCP的解（蓝色点）大量**支配（dominate）**了CONC（橙色）和R&C（绿色）的解，即CNCP在相同或更低的成本下能达到更低的跟踪误差，反之亦然。
- **超体积与稀疏度**：如表II所示，CNCP在**平均超体积上最高（10.416）**，显著高于CONC（7.132）和R&C（8.199），证明其帕累托前沿的整体质量最优。同时，CNCP的**平均稀疏度最低（1.138）**，表明其学到的帕累托解分布更均匀、全面。

#### 3. 真实世界可调节噪声抑制
**核心结论：CNCP在真实机器人上成功实现了无需重新训练的、连续可调的噪声抑制，且效果优于基线条件策略。**

- **噪声可调性**：如图4和图6所示，通过实时调整输入策略的ϵ值，机器人在**不同速度（1m/s, 1.5m/s）和不同地面（橡胶、木质）**上均能产生连续变化的噪声水平（dB值）。ϵ越小（约束越严格），噪声越低。
- **与基线对比**：如图5所示，在相同条件下，CNCP相比CONC和R&C能实现**更大幅度的噪声降低**，同时保持相对更低的跟踪误差。
- **权衡验证**：图6清晰展示了噪声抑制与速度跟踪之间的**权衡关系**。当ϵ调低以追求更安静时，速度跟踪会出现轻微偏差；而CNCP能在这种权衡中保持稳定、可预测的性能。

### 总结
论文通过系统的仿真和实物实验，提供了**明确的定量和定性结果**，强有力地证明了QuietPaw框架的价值：
1.  **技术创新有效**：基于后继特征分解的条件约束策略（CNCP）成功解决了单一策略泛化到不同噪声约束的难题。
2.  **性能全面领先**：在关键的“约束满足度”和“运动性能”权衡指标上，CNCP显著优于简单的条件策略基线（CONC, R&C）。
3.  **实用价值突出**：实现了“训练一次，灵活部署”的目标，通过一个模型即可根据环境（医院、办公室）或用户需求实时调节机器人的噪音水平，极大提升了四足机器人在人文环境中的实用性和接受度。


## 相关链接

- [arXiv 页面](https://arxiv.org/abs/2503.05035v1)
- [HTML 版本](https://arxiv.org/html/2503.05035v1)
