# Adaptive Deadlock Avoidance for Decentralized Multi-agent Systems via CBF-inspired Risk Measurement

**相关性评分**: 7.0/10

**排名**: #15


---


## 基本信息

- **arXiv ID**: [2503.09621v1](https://arxiv.org/abs/2503.09621v1)
- **发布时间**: 2025-03-09T02:09:04Z
- **相关性评分**: 7.0/10
- **是否相关**: 是

## 作者

Yanze Zhang, Yiwei Lyu, Siwon Jo, Yupeng Yang, Wenhao Luo

## 关键词

Robot control, quadruped robot locomotion, multi-agent RL, CTDE methods, Edge Deployment, mujoco, local observational information

## 一句话总结

这篇论文提出了一种基于CBF风险测量的自适应死锁避免框架，用于去中心化多智能体系统，确保安全控制并提高任务效率。

## 摘要

Decentralized safe control plays an important role in multi-agent systems given the scalability and robustness without reliance on a central authority. However, without an explicit global coordinator, the decentralized control methods are often prone to deadlock -- a state where the system reaches equilibrium, causing the robots to stall. In this paper, we propose a generalized decentralized framework that unifies the Control Lyapunov Function (CLF) and Control Barrier Function (CBF) to facilitate efficient task execution and ensure deadlock-free trajectories for the multi-agent systems. As the agents approach the deadlock-related undesirable equilibrium, the framework can detect the equilibrium and drive agents away before that happens. This is achieved by a secondary deadlock resolution design with an auxiliary CBF to prevent the multi-agent systems from converging to the undesirable equilibrium. To avoid dominating effects due to the deadlock resolution over the original task-related controllers, a deadlock indicator function using CBF-inspired risk measurement is proposed and encoded in the unified framework for the agents to adaptively determine when to activate the deadlock resolution. This allows the agents to follow their original control tasks and seamlessly unlock or deactivate deadlock resolution as necessary, effectively improving task efficiency. We demonstrate the effectiveness of the proposed method through theoretical analysis, numerical simulations, and real-world experiments.

## 详细分析

## 论文摘要

### 1. 研究背景和动机
去中心化多智能体系统因其可扩展性和鲁棒性，在传感器覆盖、仓库管理等场景中应用广泛。然而，缺乏全局协调器容易导致系统陷入**死锁**，即智能体在未达目标前停滞于非期望的平衡点。现有方法（如引入微小扰动或基于KKT条件的分析）要么无法保证彻底避免死锁，要么过早激活死锁解决机制，过度干扰原始任务执行，降低效率。因此，亟需一种能**自适应**地在任务执行与死锁避免之间取得平衡的框架。

### 2. 核心方法和技术创新
本文提出了一种**基于CBF启发式风险测量的自适应死锁避免框架**，主要创新点包括：
- **死锁指示函数**：提出一种基于控制屏障函数（CBF）风险测量的指标函数 `ζ_i(R_i)`。该函数利用Sigmoid形式，根据智能体与邻居的接近程度（风险高低）**自适应地量化死锁风险**，从而决定何时激活死锁解决机制。
- **统一优化框架**：构建了一个广义的二次规划（QP）控制器，将**任务相关的控制李雅普诺夫函数（CLF）、安全相关的CBF以及死锁解决机制**统一集成。通过死锁指示函数`ζ_i(R_i)`动态调整CLF约束和辅助CBF约束的权重：
    - 当风险低（`ζ_i → 0`）时，系统优先执行原始任务。
    - 当风险高（`ζ_i → 1`）时，系统激活死锁解决机制（通过引入状态旋转矩阵`Q_i`和辅助CBF `h_𝒟_ij`来打破导致死锁的向量共线条件）。
- **理论保证**：提供了严格的理论分析，证明了该框架能够保证**无碰撞、无死锁**，并且能渐进稳定地到达目标。

### 3. 主要实验结果
- **数值仿真**：在四智能体位置交换任务中，与传统CLF-CBF方法（陷入死锁）和持续激活死锁解决的方法相比，**本文方法在保证无死锁的同时，任务完成效率更高**（更早到达目标）。实验扩展到12个智能体，结果依然稳健。
- **实物实验**：使用四台Husarion ROSbot 2 PRO机器人进行位置交换，并加入静态障碍物。实验表明，机器人能够**在必要时自动绕行**，顺利完成碰撞规避和任务执行，验证了算法的实际有效性。

### 4. 研究意义和价值
- **理论价值**：提出了一种**统一且可证明安全**的去中心化控制框架，为解决多智能体系统中的死锁问题提供了新的理论思路，特别是**自适应激活机制**的设计。
- **实用价值**：所提方法**最小化了对原始任务的干扰**，显著提升了多智能体系统在密集动态环境中的**任务执行效率**和**整体流畅性**。该框架具有良好的通用性和可扩展性，适用于各种需要安全、高效协同的机器人应用场景。

## 问答对

### 问题 1

**Q**: 这篇论文的核心创新点是什么，他想解决什么问题，怎么解决的？

**A**: ## 论文分析：自适应死锁避免的分散式多智能体系统控制框架

### **核心问题**
论文旨在解决**分散式多智能体系统（无中央协调器）中普遍存在的死锁问题**。死锁是指系统达到一个不希望的平衡状态，导致所有智能体停滞不前，无法抵达任务目标。现有方法（如持续激活死锁解决机制）虽然能避免死锁，但会**过度干扰原始任务执行，显著降低系统效率**。

### **核心创新点**
论文提出了一个**统一的自适应控制框架**，其核心创新在于：

1.  **基于CBF风险度量的死锁指示函数**
    - **设计**：提出一个死锁指示函数 `ζ_i(R_i)`，它是一个Sigmoid函数，输入是**受控制屏障函数启发的风险度量** `R_i`。
    - **作用**：`R_i` 动态量化智能体 `i` 与其邻居发生碰撞或陷入死锁的风险。`ζ_i` 将此风险映射到 `[0, 1]` 区间，作为**自适应开关**。
        - **低风险 (`ζ_i → 0`)**：智能体远离其他智能体，死锁可能性低，**优先执行原始任务**。
        - **高风险 (`ζ_i → 1`)**：智能体接近其他智能体，死锁风险高，**激活死锁解决机制**。

2.  **统一且自适应的死锁解决框架**
    - **框架**：将上述指示函数无缝集成到一个统一的二次规划控制框架中，该框架**共同优化**了三个目标：
        1.  **任务稳定性**：通过控制李雅普诺夫函数实现。
        2.  **碰撞避免**：通过控制屏障函数实现。
        3.  **死锁解决**：通过一个**辅助的、由指示函数调制的控制屏障函数**实现。
    - **自适应机制**：死锁解决机制（通过旋转状态引入虚拟目标偏差）**不再是始终激活的独立模块**，而是通过 `ζ_i` 的值动态地、平滑地融入或退出主控制律。这实现了 **“仅在必要时介入”** 的最小干扰原则。

### **解决方案的运作方式**
1.  **问题建模**：将每个智能体的动力学建模为仿射控制系统，并使用CLF-CBF-QP框架来保证稳定性和安全性。论文首先分析了该框架下导致死锁的**边界平衡点**的存在条件。
2.  **死锁检测与规避**：
    - **检测**：利用 `ζ_i(R_i)` 实时评估死锁风险。
    - **规避**：当风险高时 (`ζ_i` 值大)，框架通过两个关键修改来破坏死锁条件：
        - **修改CLF**：引入一个旋转矩阵 `Q_i`，临时创建一个旋转后的虚拟目标 (`V_q`)，引导智能体偏离可能导致死锁的路径。
        - **添加辅助CBF**：引入函数 `h_𝒟_ij`，其设计目的是**破坏导致死锁的向量共线条件**，从而从数学上避免系统收敛到边界平衡点。
3.  **统一控制器设计**：最终的控制输入 `u_i` 和旋转控制 `ω_i` 通过求解一个统一的QP问题获得，该问题的CLF和辅助CBF约束均被 `ζ_i` 加权。这使得控制器能在“纯任务模式”、“纯死锁解决模式”和“混合模式”之间**平滑过渡**。
4.  **理论保证**：论文提供了详细的理论证明，表明在所述框架下，系统是**无死锁的**，并且能保证安全性（碰撞避免）和最终的任务稳定性。

### **实际价值与优势**
- **提高任务效率**：智能体在安全时直行，仅在风险高时绕行，相比始终激活死锁解决的方案，**显著缩短了抵达目标的时间**（仿真和实验均验证）。
- **增强实用性**：框架是分散式的，每个智能体仅依赖本地和邻居信息进行决策，**具有良好的可扩展性和鲁棒性**。
- **通用性**：当设置 `ζ_i ≡ 1` 时，该框架退化为现有的持续死锁解决方法，因此是**一个更通用的超集**。
- **验证充分**：通过**理论分析、数值仿真（包含多达12个智能体）和真实机器人实验**，全面验证了方法的有效性、高效性和鲁棒性。

### **总结**
这篇论文的核心贡献是**将死锁风险度量与控制器设计深度融合**，创造了一个能**智能感知环境拥挤度并据此动态调整控制策略**的分散式框架。它优雅地解决了 **“死锁避免”与“任务效率”之间的固有矛盾**，使多智能体系统既能可靠地避免停滞，又能高效地完成既定任务。


### 问题 2

**Q**: 请用一段话总结这篇论文，明确说明：论文试图解决的核心问题；提出的主要方法或框架；最终取得的主要效果或结论。要求语言简洁、信息密度高，不要复述摘要原文。

**A**: 这篇论文旨在解决**去中心化多智能体系统中，由于缺乏全局协调器而容易出现的死锁问题**，即智能体在未到达目标前陷入停滞状态。现有方法要么无法保证彻底避免死锁，要么为预防死锁而过度干扰智能体的原始任务执行，降低了系统效率。

为此，论文提出了一个**基于CBF（控制屏障函数）风险度量的自适应死锁避免框架**。其核心创新是设计了一个**死锁指示函数**，该函数利用CBF启发的风险度量来动态评估每个智能体陷入死锁的可能性。基于此，论文构建了一个统一的二次规划（QP）控制器，将任务相关的CLF（控制李雅普诺夫函数）、避障CBF和死锁解决机制（通过引入旋转矩阵和辅助CBF）**协同优化**。该框架的关键在于，死锁解决机制仅在指示函数显示高风险时被激活，从而实现了**在保证无死锁、无碰撞的前提下，对原始任务执行效率的最小干扰**。

理论分析、数值仿真和实物实验均表明，该方法能有效**避免死锁，同时相较于始终激活死锁解决的基线方法，显著提高了任务执行效率**，使智能体能够在安全时直行、必要时才绕行，实现了死锁避免与任务效率间的自适应平衡。


### 问题 3

**Q**: 这篇论文相对于已有工作有哪些明确的创新点？请逐条列出，并对每一条说明：相比以往方法改进或不同之处在哪里，以及该创新解决了什么具体问题或带来了什么优势。

**A**: ## 论文创新点分析

这篇论文《Adaptive Deadlock Avoidance for Decentralized Multi-agent Systems via CBF-inspired Risk Measurement》针对去中心化多智能体系统中的死锁问题，提出了一种新颖的自适应控制框架。其核心创新点主要体现在以下三个方面：

### 1. **基于CBF风险度量的自适应死锁指示函数**
- **改进/不同之处**：以往的死锁解决方法（如文献[14]）通常从任务开始就强制激活死锁解决机制，或者采用基于规则的启发式检测（如文献[7]），缺乏对系统实时风险的量化评估。本文创新性地提出一个**死锁指示函数** `ζ_i(R_i)`，该函数是一个Sigmoid函数，其输入是一个**CBF启发的风险度量** `R_i`。`R_i` 通过计算智能体与其邻居之间CBF约束的违反程度来动态评估当前环境的“拥挤度”或风险水平。
- **解决的问题/优势**：
    - **自适应激活**：`ζ_i(R_i)` 作为软开关，使系统能根据实时风险（`R_i`大小）**自适应地决定何时激活或停用死锁解决机制**。当智能体相距较远（低风险）时，`ζ_i → 0`，系统优先执行原始任务；当智能体接近（高风险）时，`ζ_i → 1`，系统无缝切换到死锁解决模式。
    - **提升任务效率**：避免了从任务开始就强制进行死锁解决所带来的**不必要干扰和效率损失**。智能体大部分时间可以遵循高效的最短路径，仅在必要时才执行避让或绕行。
    - **平滑过渡**：Sigmoid函数提供了从0到1的平滑过渡，相比硬性的“if-else”规则，能产生更平滑的机器人运动和控制指令。

### 2. **统一且广义的去中心化控制框架**
- **改进/不同之处**：现有方法常将死锁解决作为一个独立模块或事后补救措施（如引入随机扰动[8-11]），或者通过修改问题空间来规避死锁条件[15]。本文提出了一个**统一的二次规划（QP）框架**，将**任务相关的控制李雅普诺夫函数（CLF）、安全相关的控制屏障函数（CBF）以及死锁解决机制**共同编码到一组约束中。
    - **核心设计**：通过将死锁指示函数 `ζ_i(R_i)` 作为权重，**动态混合原始CLF（`V`）和用于死锁解决的扩展CLF（`V_q`）**（见公式12）。同时，将 `ζ_i(R_i)` 也引入到用于避免边界平衡点的辅助CBF约束中（公式18）。
- **解决的问题/优势**：
    - **协同优化**：该框架实现了**任务执行、碰撞避免和死锁解决三个目标的协同优化**，而非简单的级联或切换。QP求解器一次性计算出满足所有约束的最优控制输入（`u_i`）和旋转控制（`ω_i`）。
    - **理论保证的统一**：论文提供了详细的理论证明（定理4），表明该统一框架在任何初始条件下（只要 `D_ij ≠ 0`）都能生成**无死锁的轨迹**，同时保证安全（碰撞避免）和最终收敛到目标（在死锁解决停用时）。
    - **广义性**：当设置 `ζ_i(R_i) ≡ 1` 时，该框架退化为文献[14]的始终激活的死锁解决方法；当 `ζ_i(R_i) ≡ 0` 时，则退化为基础的CLF-CBF QP（公式6）。因此，本文框架是现有方法的一个**广义化形式**。

### 3. **最小侵入式的死锁解决机制集成**
- **改进/不同之处**：文献[14]通过引入状态旋转矩阵 `Q_i` 和辅助CBF `h_{D_ij}` 来破坏导致死锁的向量共线条件，但该方法“全程激活”。本文的创新在于，**将这套死锁解决机制（`V_q`, `h_{D_ij}`）的激活与否，与上述死锁指示函数 `ζ_i(R_i)` 动态绑定**。
- **解决的问题/优势**：
    - **按需介入**：死锁解决机制仅在系统感知到高风险、可能接近死锁平衡点时（`ζ_i` 值较大）才被激活。这大大减少了其对原始任务控制器（由原始CLF `V` 定义）的**主导效应**。
    - **改善动态性能**：如图1(a)仿真结果所示，与始终激活死锁解决的方法[14]相比，本文方法让智能体更快地到达目标。这是因为智能体在安全时能直线奔向目标，而不是过早开始绕行。
    - **实践可行性**：通过 `ζ_i(R_i)` 的平滑变化，避免了控制策略的突变，使得在实际机器人系统（如图5的真实实验）上实现**稳定、自然的导航行为**成为可能。

### 总结
本文的核心贡献在于**将死锁的“风险感知”与“解决动作”通过一个统一的、可证明的优化框架进行了有机融合**。其创新不是发明全新的死锁检测或解决工具，而是创造性地利用CBF风险度量构建了一个**智能的、自适应的调度器（死锁指示函数）**，从而在**保证无死锁、无碰撞的理论安全前提下，显著提升了多智能体系统的任务执行效率**。这解决了去中心化控制中长期存在的“安全与效率”以及“死锁避免与任务执行”之间的权衡难题。


### 问题 4

**Q**: 论文在实验或评估中最终实现了怎样的效果？请说明使用了哪些数据集和评价指标，与哪些基线方法进行了对比，以及在关键指标上的主要性能提升或结论。如果论文未给出明确的定量结果，也请说明原因。

**A**: ## 论文实验与评估效果分析

该论文通过**数值仿真**和**实物实验**验证了所提方法的有效性，并与现有基线方法进行了对比。以下是详细的实验设置、评价指标、对比方法和主要结论。

### 一、 实验设置与评价指标

#### 1. 仿真实验
- **场景**：多智能体位置交换游戏（Multi-agent position swapping game）。
- **智能体模型**：单积分器动力学模型（`ẋ_i = u_i`）。
- **智能体数量**：主要实验为4个智能体，扩展实验最多至12个智能体。
- **任务函数 (CLF)**：`V(x_i) = ||x_i - x_i^goal||^2`，驱使智能体向目标点移动。
- **安全函数 (CBF)**：`h_ij(x) = ||x_i - x_j||^2 - (r_i + r_j)^2`，保证智能体间避免碰撞。
- **初始位置**：对称分布，例如4个智能体初始位置为 `(-10,0), (0,10), (10,0), (0,-10)`。
- **评价指标**：
    - **核心指标**：**所有智能体当前位置到各自目标位置的平均距离随时间的变化**。该指标直接反映了任务执行效率以及是否陷入死锁（距离不再下降）。
    - **辅助指标**：**死锁指示函数ζ的平均值**，用于观察死锁解决机制何时被激活（ζ接近1）或关闭（ζ接近0）。

#### 2. 实物实验
- **平台**：4台Husarion ROSbot 2 PRO移动机器人。
- **环境**：真实世界，场地中央额外放置了一个静态障碍物。
- **系统**：使用OptiTrack运动捕捉系统获取实时位置，通过ROS进行通信，每个机器人进行分布式在线计算。
- **控制映射**：使用近恒等微分同胚（NID）将单积分器模型的控制量映射到真实机器人的独轮车模型控制指令。
- **评价方式**：**轨迹可视化**，观察机器人是否能安全、高效地完成位置交换并规避障碍，无明确量化指标。

### 二、 对比的基线方法

论文与以下两种基线方法进行了对比：

1.  **标准CLF-CBF方法 (Eq. 6)**：
    - 仅使用任务CLF和避障CBF构建二次规划（QP）。
    - **已知问题**：容易收敛到边界平衡点，导致系统陷入死锁。

2.  **带死锁解决的CLF-CBF方法 (基于 [14] 的方法)**：
    - 在标准CLF-CBF框架中，**始终**引入一个辅助CBF (`h_𝒟_ij`) 来避免死锁的必要条件。
    - **缺点**：死锁解决机制从任务开始阶段就持续作用，可能会不必要地干扰原始任务执行，降低效率。

### 三、 关键性能与结论

#### 1. 任务效率显著提升（核心定量结果）
- **仿真结果（图1a, 图4）**：
    - **标准CLF-CBF方法**：在 `t ≈ 70` 时，平均距离停止下降，系统**陷入死锁**。
    - **带死锁解决的CLF-CBF方法**：虽然能避免死锁并最终到达目标，但因其机制始终激活，机器人过早开始绕行，**收敛速度较慢**。
    - **本文方法**：通过自适应死锁指示函数 `ζ(R_i)`，仅在风险高时（智能体靠近）激活死锁解决机制。结果显示，**本文方法到达目标的速度最快**，在相同时间内（如 `t=500`）平均剩余距离最小，**任务执行效率最高**。

- **扩展实验（图4）**：
    - 在智能体数量从4个增加到12个的各种对称初始场景下进行10次重复实验。
    - 在固定结束时刻（`t=500`），**本文方法在所有场景下的平均剩余距离均低于基线方法 [14]**，且方差更小，证明了其**优越的效率和鲁棒性**。

#### 2. 自适应机制有效工作
- **死锁指示函数分析（图1b）**：
    - 在仿真初期（前300步），`ζ` 的平均值在大部分时间为0，表明死锁解决机制未被激活，机器人**直接朝向目标移动**。
    - 当机器人相互接近、风险 `R_i` 升高时，`ζ` 值上升（接近1），死锁解决机制被激活，引导机器人进行必要的绕行。
    - 这直观地证明了所提框架能够**“按需”** 激活死锁解决，在安全时优先保证任务效率。

#### 3. 轨迹行为对比（定性分析）
- **轨迹图（图2 vs 图3）**：
    - 标准方法（图2a）：轨迹在中心区域停滞，形成死锁。
    - 基线死锁解决方法（图2b）：轨迹显示智能体很早就开始大幅绕行。
    - 本文方法（图3）：轨迹更直接，仅在交汇处进行必要的小幅调整，路径更平滑、自然。

#### 4. 实物实验验证
- **实验结果（图5）**：
    - 4台真实机器人在存在静态障碍物的情况下，成功完成了位置交换任务。
    - 轨迹显示机器人能够**自主判断并在必要时进行绕行**，同时保持安全距离，最终顺利到达各自目标。
    - 这证明了算法在**存在模型不确定性、通信延迟和真实噪声**的环境中的可行性与有效性。

### 总结
论文通过清晰的定量指标（平均目标距离）和定性分析（轨迹、死锁指示函数值），有力地证明了所提出的**自适应死锁避免框架**在**解决死锁问题**和**提升任务执行效率**两方面的优势。其主要结论是：该方法能够使去中心化多智能体系统在保证安全无碰撞的前提下，智能地仅在濒临死锁风险时介入，从而在整体上实现比始终开启死锁解决机制的方案更优、更高效的导航性能。


## 相关链接

- [arXiv 页面](https://arxiv.org/abs/2503.09621v1)
- [HTML 版本](https://arxiv.org/html/2503.09621v1)
